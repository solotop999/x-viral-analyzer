<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Will Your Post Go Viral?</title>
    <link rel="icon" type="image/svg+xml" href="favicon.ico">
    <meta name="description" content="Analyze your X posts using the actual open-source algorithm. Get a viral score and actionable recommendations.">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
            min-height: 100vh;
            color: white;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 50px;
            position: relative;
        }
        
        .language-toggle {
            position: absolute;
            top: 0;
            right: 0;
            display: flex;
            align-items: center;
            gap: 0;
            background: rgba(29, 155, 240, 0.08);
            border: 1.5px solid rgba(29, 155, 240, 0.25);
            border-radius: 10px;
            padding: 8px 4px;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .lang-btn {
            padding: 8px 14px;
            border: none;
            background: transparent;
            color: rgba(255, 255, 255, 0.65);
            cursor: pointer;
            font-size: 12px;
            font-weight: 700;
            transition: all 0.3s ease;
            position: relative;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }
        
        .lang-btn:first-child::after {
            content: '';
            position: absolute;
            right: -4px;
            top: 50%;
            transform: translateY(-50%);
            width: 1px;
            height: 16px;
            background: rgba(255, 255, 255, 0.2);
        }
        
        .lang-btn.active {
            background: rgba(29, 155, 240, 0.25);
            color: #1d9bf0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(29, 155, 240, 0.2);
        }
        
        .lang-btn:hover:not(.active) {
            color: rgba(255, 255, 255, 0.85);
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }
        
        .logo {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            background: rgba(29, 155, 240, 0.1);
            border: 2px solid rgba(29, 155, 240, 0.3);
            padding: 12px 24px;
            border-radius: 50px;
            margin-bottom: 20px;
        }
        
        .logo-img {
            width: 32px;
            height: 32px;
            border-radius: 20px;
            object-fit: cover;
            border: 2px solid rgba(29, 155, 240, 0.3);
            box-shadow: 0 2px 8px rgba(29, 155, 240, 0.15);
        }
        
        .logo-icon {
            font-size: 24px;
        }
        
        .logo-text {
            color: #1d9bf0;
            font-weight: 700;
            font-size: 16px;
            letter-spacing: 0.5px;
        }
        
        h1 {
            font-size: 48px;
            font-weight: 900;
            margin-bottom: 12px;
            background: linear-gradient(135deg, #1d9bf0 0%, #7856ff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .subtitle {
            font-size: 18px;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 8px;
        }
        
        .credit {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.4);
        }
        
        .input-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
        }
        
        label {
            display: block;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            color: rgba(255, 255, 255, 0.9);
        }
        
        textarea {
            width: 100%;
            min-height: 150px;
            padding: 16px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: white;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
            transition: border-color 0.3s;
        }
        
        textarea:focus {
            outline: none;
            border-color: #1d9bf0;
        }
        
        textarea::placeholder {
            color: rgba(255, 255, 255, 0.3);
        }
        
        .char-count {
            text-align: right;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.4);
            margin-top: 8px;
        }
        
        .analyze-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #1d9bf0 0%, #7856ff 100%);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 20px;
        }
        
        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(29, 155, 240, 0.3);
        }
        
        .analyze-btn:active {
            transform: translateY(0);
        }
        
        .results {
            display: none;
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .score-card {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .score-label {
            font-size: 18px;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 600;
        }
        
        .score-value {
            font-size: 96px;
            font-weight: 900;
            line-height: 1;
            margin-bottom: 12px;
        }
        
        .score-max {
            font-size: 24px;
            color: rgba(255, 255, 255, 0.4);
            margin-bottom: 20px;
        }
        
        .verdict {
            font-size: 24px;
            font-weight: 700;
            padding: 12px 24px;
            border-radius: 50px;
            display: inline-block;
        }
        
        .verdict.viral {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
            border: 2px solid rgba(34, 197, 94, 0.3);
        }
        
        .verdict.good {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
            border: 2px solid rgba(59, 130, 246, 0.3);
        }
        
        .verdict.meh {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
            border: 2px solid rgba(251, 191, 36, 0.3);
        }
        
        .verdict.bad {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 2px solid rgba(239, 68, 68, 0.3);
        }
        
        .signals-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin-bottom: 30px;
        }
        
        .signal-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
        }
        
        .signal-card.positive {
            border-left: 4px solid #22c55e;
        }
        
        .signal-card.negative {
            border-left: 4px solid #ef4444;
        }
        
        .signal-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }
        
        .signal-icon {
            font-size: 24px;
        }
        
        .signal-name {
            font-weight: 600;
            font-size: 16px;
        }
        
        .signal-status {
            margin-left: auto;
            font-size: 20px;
        }
        
        .signal-description {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.6);
            line-height: 1.5;
        }
        
        .recommendations {
            background: rgba(29, 155, 240, 0.1);
            border: 2px solid rgba(29, 155, 240, 0.3);
            border-radius: 16px;
            padding: 30px;
        }
        
        .recommendations h3 {
            font-size: 24px;
            margin-bottom: 20px;
            color: #1d9bf0;
        }
        
        .recommendation-item {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
            padding: 16px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
        }
        
        .recommendation-icon {
            font-size: 20px;
            flex-shrink: 0;
        }
        
        .recommendation-text {
            font-size: 15px;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.9);
        }
        
        .footer {
            text-align: center;
            margin-top: 60px;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.4);
            font-size: 14px;
        }
        
        .footer a {
            color: #1d9bf0;
            text-decoration: none;
        }
        
        .footer a:hover {
            text-decoration: underline;
        }
        
        .social-follow {
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid rgba(29, 155, 240, 0.15);
        }
        
        .follow-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: linear-gradient(135deg, rgba(29, 155, 240, 0.1) 0%, rgba(120, 86, 255, 0.05) 100%);
            border: 1px solid rgba(29, 155, 240, 0.25);
            border-radius: 24px;
            color: #1d9bf0;
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        
        .follow-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(29, 155, 240, 0.1);
            transition: left 0.4s ease;
        }
        
        .follow-btn:hover {
            border-color: rgba(29, 155, 240, 0.4);
            box-shadow: 0 4px 16px rgba(29, 155, 240, 0.15);
            transform: translateY(-2px);
        }
        
        .follow-btn:hover::before {
            left: 100%;
        }
        
        .follow-btn-content {
            position: relative;
            z-index: 1;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .follow-icon {
            font-size: 16px;
        }
        
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="language-toggle">
                <button class="lang-btn active" onclick="switchLanguage('en')">EN</button>
                <button class="lang-btn" onclick="switchLanguage('vi')">VI</button>
            </div>
            <div class="logo">
                <span class="logo-text" data-i18n="app-title"> ùïè VIRAL SCORE ANALYZER</span>
            </div>
            <h1 data-i18n="page-title">Will Your Post Go Viral?</h1>
            <p class="subtitle" data-i18n="subtitle">Based on X's open-source algorithm</p>
            <p class="credit" data-i18n="credit">Analyzed using the actual Grok transformer signals</p>
        </header>
        
        <div class="input-section">
            <label for="tweetInput" data-i18n="input-label">Paste your post here:</label>
            <textarea 
                id="tweetInput" 
                placeholder="Enter your post text... (Be as specific as possible for better analysis)"
                maxlength="10000"
            ></textarea>
            <div class="char-count">
                <span id="charCount">0</span> <span data-i18n="char-label">characters</span>
            </div>
            <button class="analyze-btn" onclick="analyzeTweet()" data-i18n="analyze-btn">
                üöÄ Analyze Viral Potential
            </button>
        </div>
        
        <div class="results" id="results">
            <div class="score-card">
                <div class="score-label" data-i18n="score-label">Viral Score</div>
                <div class="score-value" id="scoreValue">0</div>
                <div class="score-max">/ 100</div>
                <div class="verdict" id="verdict">Analyzing...</div>
            </div>
            
            <div class="signals-grid" id="signalsGrid"></div>
            
            <div class="recommendations" id="recommendations"></div>
        </div>
        
        <div class="footer">
            <p data-i18n="footer-credit">Built by Sharbel ‚Ä¢ Powered by X's open-source algorithm</p>
            <p style="margin-top: 8px;">
                <a href="https://github.com/xai-org/x-algorithm" target="_blank" data-i18n="footer-link">View the algorithm code ‚Üí</a>
            </p>
            <p style="margin-top: 12px; font-size: 12px; color: rgba(255, 255, 255, 0.3);" data-i18n="code-credit">Code reference from author: Sharbel</p>
            <div class="social-follow">
                <a href="https://x.com/solotop999" target="_blank" class="follow-btn">
                    <div class="follow-btn-content">
                        <img src="logo.jpg" alt="Logo" class="logo-img">
                        <span data-i18n="follow-text">Follow me!</span>
                    </div>
                </a>
            </div>
        </div>
    </div>

    <script>
        // i18n translations
        const translations = {
            vi: {
                'app-title': 'ùïè VIRAL SCORE ANALYZER',
                'page-title': 'B√†i vi·∫øt c·ªßa b·∫°n s·∫Ω Viral ch·ª©?',
                'subtitle': 'D·ª±a tr√™n thu·∫≠t to√°n m√£ ngu·ªìn m·ªü c·ªßa X',
                'credit': 'Ph√¢n t√≠ch s·ª≠ d·ª•ng c√°c t√≠n hi·ªáu Grok transformer th·ª±c t·∫ø',
                'input-label': 'D√°n b√†i post c·ªßa b·∫°n:',
                'char-label': 'k√Ω t·ª±',
                'analyze-btn': 'üöÄ Ph√¢n T√≠ch Kh·∫£ NƒÉng Viral',
                'score-label': 'Viral Score',
                'analyzing': 'ƒêang ph√¢n t√≠ch...',
                'footer-credit': 'X√¢y d·ª±ng b·ªüi Sharbel ‚Ä¢ ƒê∆∞·ª£c h·ªó tr·ª£ b·ªüi thu·∫≠t to√°n m√£ ngu·ªìn m·ªü c·ªßa X',
                'footer-link': 'Xem m√£ thu·∫≠t to√°n ‚Üí',
                'code-credit': 'Tham kh·∫£o code t·ª´ t√°c gi·∫£: Sharbel',
                'alert-empty': 'Vui l√≤ng nh·∫≠p n·ªôi dung b√†i post!',
                'strong-hook': 'M·ªü ƒê·∫ßu M·∫°nh',
                'hook-desc': 'M·ªü ƒë·∫ßu v·ªõi s·ª± t√≤ m√≤ ho·∫∑c gi√° tr·ªã - t·∫°o ra l∆∞·ª£t nh·∫•p v√† truy c·∫≠p h·ªì s∆°',
                'weak-hook': 'M·ªü ƒê·∫ßu Y·∫øu',
                'weak-hook-desc': 'C√¢u ƒë·∫ßu ti√™n kh√¥ng thu h√∫t s·ª± ch√∫ √Ω - c√≥ th·ªÉ b·ªã cu·ªôn qua',
                'start-with-question': 'B·∫Øt ƒë·∫ßu b·∫±ng m·ªôt c√¢u h·ªèi, tuy√™n b·ªë m·∫°nh m·∫Ω, ho·∫∑c gi√° tr·ªã t·ª©c th√¨ ƒë·ªÉ k√©o ƒë·ªôc gi·∫£',
                'asks-question': 'ƒê·∫∑t C√¢u H·ªèi',
                'question-desc': 'C√¢u h·ªèi t·∫°o ra ph·∫£n h·ªìi - m·ªôt trong nh·ªØng t√≠n hi·ªáu ƒë∆∞·ª£c c√¢n n·∫∑ng nh·∫•t',
                'no-question': 'Kh√¥ng C√≥ C√¢u H·ªèi',
                'no-question-desc': 'Thi·∫øu c∆° h·ªôi t∆∞∆°ng t√°c ph·∫£n h·ªìi',
                'add-question': 'Th√™m m·ªôt c√¢u h·ªèi ·ªü cu·ªëi ƒë·ªÉ khuy·∫øn kh√≠ch ph·∫£n h·ªìi (t√≠n hi·ªáu thu·∫≠t to√°n l·ªõn)',
                'good-length': 'ƒê·ªô D√†i T·ªët',
                'good-length-desc': 't·ªëi ∆∞u cho th·ªùi gian xem m√† kh√¥ng m·∫•t s·ª± ch√∫ √Ω',
                'too-short': 'Qu√° Ng·∫Øn',
                'too-short-desc': 'c√≥ th·ªÉ kh√¥ng t·∫°o ƒë·ªß th·ªùi gian xem',
                'very-long': 'R·∫•t D√†i',
                'very-long-desc': 'c√≥ th·ªÉ m·∫•t s·ª± ch√∫ √Ω, nh∆∞ng t·ªët cho ƒë·ªëi t∆∞·ª£ng c·ª±c k√¨ tham gia',
                'add-context': 'Th√™m th√™m b·ªëi c·∫£nh ho·∫∑c gi√° tr·ªã - h∆∞·ªõng t·ªõi 30-150 t·ª´ ƒë·ªÉ c√≥ th·ªùi gian xem t·ªët h∆°n',
                'data-driven': 'D·ªØ Li·ªáu C·ª• Th·ªÉ',
                'data-desc': 'C√°c con s·ªë v√† d·ªØ li·ªáu tƒÉng ƒë·ªô tin c·∫≠y v√† kh·∫£ nƒÉng chia s·∫ª',
                'no-data': 'Kh√¥ng C√≥ D·ªØ Li·ªáu',
                'no-data-desc': 'Th√™m c√°c con s·ªë c·ª• th·ªÉ tƒÉng l√≤ng tin v√† l∆∞·ª£t chia s·∫ª',
                'add-numbers': 'Th√™m c√°c con s·ªë ho·∫∑c ƒëi·ªÉm d·ªØ li·ªáu c·ª• th·ªÉ ƒë·ªÉ tƒÉng ƒë·ªô tin c·∫≠y v√† l∆∞·ª£t chia s·∫ª',
                'readable-format': 'ƒê·ªãnh D·∫°ng C√≥ Th·ªÉ ƒê·ªçc',
                'readable-desc': 'ƒê·ªãnh d·∫°ng t·ªët gi·ªØ cho m·ªçi ng∆∞·ªùi ƒë·ªçc (th·ªùi gian xem)',
                'wall-of-text': 'M·ªôt B·ª©c T∆∞·ªùng VƒÉn B·∫£n',
                'wall-desc': 'VƒÉn b·∫£n d√†y ƒë·∫∑c ·∫£nh h∆∞·ªüng ƒë·∫øn th·ªùi gian xem - m·ªçi ng∆∞·ªùi cu·ªôn qua',
                'add-linebreaks': 'Chia th√†nh c√°c ƒëo·∫°n ng·∫Øn h∆°n - s·ª≠ d·ª•ng ng·∫Øt d√≤ng cho kh·∫£ nƒÉng ƒë·ªçc',
                'clear-cta': 'CTA R√µ R√†ng',
                'cta-desc': 'Cho m·ªçi ng∆∞·ªùi bi·∫øt ph·∫£i l√†m g√¨ - t·∫°o ra c√°c h√†nh ƒë·ªông t∆∞∆°ng t√°c c·ª• th·ªÉ',
                'no-cta': 'Kh√¥ng C√≥ CTA',
                'no-cta-desc': 'Thi·∫øu l·ªùi k√™u g·ªçi h√†nh ƒë·ªông r√µ r√†ng',
                'add-cta': 'K·∫øt th√∫c b·∫±ng l·ªùi k√™u g·ªçi h√†nh ƒë·ªông r√µ r√†ng (ph·∫£n h·ªìi, chia s·∫ª, theo d√µi, v.v.)',
                'not-spammy': 'Kh√¥ng Ph·∫£i Spam',
                'not-spammy-desc': 'Tr√°nh ng√¥n ng·ªØ spam k√≠ch ho·∫°t ch·∫∑n/·∫©n',
                'spam-triggers': 'K√≠ch Ho·∫°t Spam',
                'spam-desc': 'Ch·ª©a c√°c c·ª•m t·ª´ khi·∫øn m·ªçi ng∆∞·ªùi b·∫•m "kh√¥ng quan t√¢m" ho·∫∑c ch·∫∑n',
                'remove-spam': 'Lo·∫°i b·ªè ng√¥n ng·ªØ gi·ªëng spam - n√≥ k√≠ch ho·∫°t t√≠n hi·ªáu thu·∫≠t to√°n ti√™u c·ª±c',
                'emotional-hook': 'K√≠ch Ho·∫°t C·∫£m X√∫c',
                'emotional-desc': 'Ng√¥n ng·ªØ c·∫£m x√∫c t·∫°o ra s·ª± t∆∞∆°ng t√°c tr√™n t·∫•t c·∫£ c√°c lo·∫°i t√≠n hi·ªáu',
                'neutral-tone': 'T√¥ng Trung L·∫≠p',
                'neutral-desc': 'C√≥ th·ªÉ kh√¥ng k√≠ch ho·∫°t c√°c ph·∫£n ·ª©ng t∆∞∆°ng t√°c m·∫°nh',
                'add-emotion': 'Th√™m ng√¥n ng·ªØ c·∫£m x√∫c ho·∫∑c c√°ch di·ªÖn ƒë·∫°t c√≥ t√°c ƒë·ªông ƒë·ªÉ l√†m cho n√≥ h·∫•p d·∫´n h∆°n',
                'tags-others': 'G·∫Øn Th·∫ª Cho Nh·ªØng Ng∆∞·ªùi Kh√°c',
                'tags-desc': 'Nh·∫Øc ƒë·∫øn ng∆∞·ªùi kh√°c ƒë·ªÉ m·ªü r·ªông ph·∫°m vi ngo√†i m·∫°ng c·ªßa b·∫°n',
                'thread-potential': 'Ti·ªÅm NƒÉng Chu·ªói B√†i',
                'thread-desc': 'C√°c chu·ªói b√†i t·∫°o ra s·ª± t∆∞∆°ng t√°c b·ªÅn v·ªØng v√† l∆∞·ª£t truy c·∫≠p h·ªì s∆°',
                'viral-potential': 'VIRAL POTENTIAL üöÄ',
                'strong-post': 'STRONG POST üí™',
                'decent': 'DECENT üëç',
                'needs-work': 'NEEDS WORK üîß',
                'excellent': 'Xu·∫•t S·∫Øc!',
                'excellent-text': 'B√†i post c·ªßa b·∫°n c√≥ ti·ªÅm nƒÉng viral m·∫°nh. Thu·∫≠t to√°n s·∫Ω th∆∞·ªüng cho n√≥ b·∫±ng c√°ch m·ªü r·ªông ti·∫øp c·∫≠n!',
                'how-to-improve': 'üí° C√°ch C·∫£i Thi·ªán',
                'remember': 'Nh·ªõ r·∫±ng: Thu·∫≠t to√°n th∆∞·ªüng cho c√°c b√†i post t·∫°o ra nhi·ªÅu lo·∫°i t∆∞∆°ng t√°c (kh√¥ng ch·ªâ l∆∞·ª£t th√≠ch)',
                'quick-win': 'C√°ch Nhanh: Th√™m c√¢u h·ªèi HO·∫∂C CTA r√µ r√†ng ƒë·ªÉ tƒÉng t√≠n hi·ªáu t∆∞∆°ng t√°c',
                'follow-text': 'Follow me!',
                'algo-title': 'üìä C√°c T√≠n Hi·ªáu Thu·∫≠t To√°n',
                'algo-1': 'üé£ <strong>M·ªü ƒê·∫ßu M·∫°nh</strong> - B·∫Øt l·∫•y s·ª± ch√∫ √Ω ngay c√¢u ƒë·∫ßu',
                'algo-2': '‚ùì <strong>C√¢u H·ªèi</strong> - K√≠ch th√≠ch ph·∫£n h·ªìi v√† t∆∞∆°ng t√°c',
                'algo-3': 'üìè <strong>ƒê·ªô D√†i T·ªëi ∆Øu</strong> - 30-150 t·ª´ ƒë·ªÉ th·ªùi gian xem t·ªët',
                'algo-4': 'üìä <strong>D·ªØ Li·ªáu C·ª• Th·ªÉ</strong> - Th√™m con s·ªë v√† th·ªëng k√™',
                'algo-5': 'üì± <strong>ƒê·ªãnh D·∫°ng R√µ</strong> - S·ª≠ d·ª•ng ng·∫Øt d√≤ng cho t√≠nh d·ªÖ ƒë·ªçc',
                'algo-6': 'üéØ <strong>CTA R√µ R√†ng</strong> - H√£y n√≥i ƒë·ªôc gi·∫£ ph·∫£i l√†m g√¨',
                'algo-7': '‚ú® <strong>Tr√°nh Spam</strong> - Kh√¥ng d√πng ng√¥n ng·ªØ g·ª£i l√™n c·∫£nh b√°o',
                'algo-8': 'üî• <strong>K√≠ch Ho·∫°t C·∫£m X√∫c</strong> - T·∫°o ph·∫£n ·ª©ng v√† c·∫£m gi√°c',
                'algo-9': 'üë• <strong>G·∫Øn Th·∫ª Ng∆∞·ªùi Kh√°c</strong> - M·ªü r·ªông reach ngo√†i m·∫°ng c·ªßa b·∫°n',
                'algo-10': 'üßµ <strong>Ti·ªÅm NƒÉng Thread</strong> - T·∫°o n·ªôi dung ƒëa ph·∫ßn'
            },
            en: {
                'app-title': 'VIRAL SCORE ANALYZER',
                'page-title': 'Will Your Post Go Viral?',
                'subtitle': 'Based on X\'s open-source algorithm',
                'credit': 'Analyzed using the actual Grok transformer signals',
                'input-label': 'Paste your post here:',
                'char-label': 'characters',
                'analyze-btn': 'üöÄ Analyze Viral Potential',
                'score-label': 'Viral Score',
                'analyzing': 'Analyzing...',
                'footer-credit': 'Built by Sharbel ‚Ä¢ Powered by X\'s open-source algorithm',
                'footer-link': 'View the algorithm code ‚Üí',
                'code-credit': 'Code reference from author: Sharbel',
                'alert-empty': 'Please enter some text to analyze!',
                'strong-hook': 'Strong Hook',
                'hook-desc': 'Opens with curiosity or value - drives clicks and profile visits',
                'weak-hook': 'Weak Hook',
                'weak-hook-desc': 'First sentence doesn\'t grab attention - may get scrolled past',
                'start-with-question': 'Start with a question, bold claim, or immediate value to hook readers',
                'asks-question': 'Asks Question',
                'question-desc': 'Questions drive replies - one of the highest-weighted signals',
                'no-question': 'No Question',
                'no-question-desc': 'Missing opportunity for reply engagement',
                'add-question': 'Add a question at the end to encourage replies (major algorithm signal)',
                'good-length': 'Good Length',
                'good-length-desc': 'optimal for dwell time without losing attention',
                'too-short': 'Too Short',
                'too-short-desc': 'may not drive enough dwell time',
                'very-long': 'Very Long',
                'very-long-desc': 'might lose attention, but good for super engaged audience',
                'add-context': 'Add more context or value - aim for 30-150 words for better dwell time',
                'data-driven': 'Data-Driven',
                'data-desc': 'Numbers and data increase credibility and shareability',
                'no-data': 'No Data',
                'no-data-desc': 'Adding specific numbers increases trust and shares',
                'add-numbers': 'Add specific numbers or data points to boost credibility and reposts',
                'readable-format': 'Readable Format',
                'readable-desc': 'Good formatting keeps people reading (dwell time)',
                'wall-of-text': 'Wall of Text',
                'wall-desc': 'Dense text hurts dwell time - people scroll past',
                'add-linebreaks': 'Break into shorter paragraphs - use line breaks for readability',
                'clear-cta': 'Clear CTA',
                'cta-desc': 'Tells people what to do - drives specific engagement actions',
                'no-cta': 'No CTA',
                'no-cta-desc': 'Missing explicit call-to-action',
                'add-cta': 'End with a clear call-to-action (reply, share, follow, etc.)',
                'not-spammy': 'Not Spammy',
                'not-spammy-desc': 'Avoids spam language that triggers blocks/mutes',
                'spam-triggers': 'Spam Triggers',
                'spam-desc': 'Contains phrases that make people hit "not interested" or block',
                'remove-spam': 'Remove spam-like language - it triggers negative algorithm signals',
                'emotional-hook': 'Emotional Hook',
                'emotional-desc': 'Emotional language drives engagement across all signal types',
                'neutral-tone': 'Neutral Tone',
                'neutral-desc': 'May not trigger strong engagement reactions',
                'add-emotion': 'Add emotional language or stakes to make it more engaging',
                'tags-others': 'Tags Others',
                'tags-desc': 'Mentions expand reach beyond your network',
                'thread-potential': 'Thread Potential',
                'thread-desc': 'Threads drive sustained engagement and profile clicks',
                'viral-potential': 'VIRAL POTENTIAL üöÄ',
                'strong-post': 'STRONG POST üí™',
                'decent': 'DECENT üëç',
                'needs-work': 'NEEDS WORK üîß',
                'excellent': 'Excellent!',
                'excellent-text': 'Your post has strong viral potential. The algorithm should reward this with good reach!',
                'how-to-improve': 'üí° How to Improve',
                'remember': 'Remember: The algorithm rewards posts that drive multiple engagement types (not just likes)',
                'quick-win': 'Quick win: Add a question OR clear CTA to boost engagement signals',
                'follow-text': 'Follow me!'
            }
        };

        let currentLanguage = 'en';
        let lastText = null;  // Store last analyzed text

        function switchLanguage(lang) {
            currentLanguage = lang;
            
            // Update active button
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Find and activate the correct button
            if (lang === 'en') {
                document.querySelectorAll('.lang-btn')[0].classList.add('active');
            } else {
                document.querySelectorAll('.lang-btn')[1].classList.add('active');
            }
            
            // Update all elements with data-i18n
            document.querySelectorAll('[data-i18n]').forEach(elem => {
                const key = elem.getAttribute('data-i18n');
                elem.textContent = translations[lang][key];
            });
            
            // Update placeholder
            const textarea = document.getElementById('tweetInput');
            if (lang === 'vi') {
                textarea.placeholder = 'Nh·∫≠p n·ªôi dung b√†i post...';
            } else {
                textarea.placeholder = 'Enter your post text... (Be as specific as possible for better analysis)';
            }
            
            // If there's a previous analysis, re-analyze with new language
            if (lastText) {
                const newAnalysis = analyzeContent(lastText);
                displaySignals(newAnalysis.signals);
                displayRecommendations(newAnalysis.recommendations);
            }
        }

        function t(key) {
            return translations[currentLanguage][key] || translations['vi'][key];
        }

        const textarea = document.getElementById('tweetInput');
        const charCount = document.getElementById('charCount');
        
        textarea.addEventListener('input', () => {
            charCount.textContent = textarea.value.length;
        });
        
        function analyzeTweet() {
            const text = textarea.value.trim();
            
            if (!text) {
                alert(t('alert-empty'));
                return;
            }
            
            // Run analysis
            const analysis = analyzeContent(text);
            lastText = text;  // Store original text
            
            // Show results with animation
            const results = document.getElementById('results');
            results.style.display = 'block';
            results.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            
            // Display score
            animateScore(analysis.score);
            
            // Display verdict
            displayVerdict(analysis.score, analysis.verdict);
            
            // Display signals
            displaySignals(analysis.signals);
            
            // Display recommendations
            displayRecommendations(analysis.recommendations);
        }
        
        function analyzeContent(text) {
            const signals = [];
            let score = 0;
            const recommendations = [];
            
            // Signal 1: Has a Hook (first sentence quality)
            const firstSentence = text.split(/[.!?]/)[0];
            const hasHook = firstSentence.length > 0 && (
                text.toLowerCase().includes('how to') ||
                text.toLowerCase().includes('why') ||
                text.match(/\?/) ||
                text.toLowerCase().includes('secret') ||
                text.toLowerCase().includes('never') ||
                firstSentence.length < 100
            );
            if (hasHook) {
                score += 15;
                signals.push({
                    name: t('strong-hook'),
                    icon: 'üé£',
                    status: '‚úÖ',
                    type: 'positive',
                    description: t('hook-desc')
                });
            } else {
                signals.push({
                    name: t('weak-hook'),
                    icon: 'üé£',
                    status: '‚ùå',
                    type: 'negative',
                    description: t('weak-hook-desc')
                });
                recommendations.push({
                    icon: 'üí°',
                    text: t('start-with-question')
                });
            }
            
            // Signal 2: Asks a Question (drives replies)
            const hasQuestion = text.includes('?');
            if (hasQuestion) {
                score += 12;
                signals.push({
                    name: t('asks-question'),
                    icon: '‚ùì',
                    status: '‚úÖ',
                    type: 'positive',
                    description: t('question-desc')
                });
            } else {
                signals.push({
                    name: t('no-question'),
                    icon: '‚ùì',
                    status: '‚ö†Ô∏è',
                    type: 'negative',
                    description: t('no-question-desc')
                });
                recommendations.push({
                    icon: 'üó£Ô∏è',
                    text: t('add-question')
                });
            }
            
            // Signal 3: Optimal Length (dwell time)
            const wordCount = text.split(/\s+/).length;
            const optimalLength = wordCount >= 30 && wordCount <= 150;
            if (optimalLength) {
                score += 10;
                signals.push({
                    name: t('good-length'),
                    icon: 'üìè',
                    status: '‚úÖ',
                    type: 'positive',
                    description: `${wordCount} t·ª´ - ${t('good-length-desc')}`
                });
            } else if (wordCount < 30) {
                signals.push({
                    name: t('too-short'),
                    icon: 'üìè',
                    status: '‚ö†Ô∏è',
                    type: 'negative',
                    description: `${wordCount} t·ª´ - ${t('too-short-desc')}`
                });
                recommendations.push({
                    icon: '‚úçÔ∏è',
                    text: t('add-context')
                });
            } else {
                score += 5;
                signals.push({
                    name: t('very-long'),
                    icon: 'üìè',
                    status: '‚ö†Ô∏è',
                    type: 'negative',
                    description: `${wordCount} t·ª´ - ${t('very-long-desc')}`
                });
            }
            
            // Signal 4: Includes Numbers/Data (shareability)
            const hasNumbers = /\d+/.test(text);
            if (hasNumbers) {
                score += 8;
                signals.push({
                    name: t('data-driven'),
                    icon: 'üìä',
                    status: '‚úÖ',
                    type: 'positive',
                    description: t('data-desc')
                });
            } else {
                signals.push({
                    name: t('no-data'),
                    icon: 'üìä',
                    status: '‚ö†Ô∏è',
                    type: 'negative',
                    description: t('no-data-desc')
                });
                recommendations.push({
                    icon: 'üî¢',
                    text: t('add-numbers')
                });
            }
            
            // Signal 5: Line Breaks (readability/dwell)
            const lineBreaks = (text.match(/\n/g) || []).length;
            const hasGoodFormatting = lineBreaks >= 2 || wordCount < 40;
            if (hasGoodFormatting) {
                score += 8;
                signals.push({
                    name: t('readable-format'),
                    icon: 'üì±',
                    status: '‚úÖ',
                    type: 'positive',
                    description: t('readable-desc')
                });
            } else {
                signals.push({
                    name: t('wall-of-text'),
                    icon: 'üì±',
                    status: '‚ùå',
                    type: 'negative',
                    description: t('wall-desc')
                });
                recommendations.push({
                    icon: '‚èé',
                    text: t('add-linebreaks')
                });
            }
            
            // Signal 6: Has Call-to-Action (drives multiple engagements)
            const hasCTA = text.toLowerCase().match(/reply|comment|share|repost|like|follow|click|check|read|watch|listen|tr·∫£ l·ªùi|b√¨nh lu·∫≠n|chia s·∫ª|th√≠ch|theo d√µi/);
            if (hasCTA) {
                score += 10;
                signals.push({
                    name: t('clear-cta'),
                    icon: 'üéØ',
                    status: '‚úÖ',
                    type: 'positive',
                    description: t('cta-desc')
                });
            } else {
                signals.push({
                    name: t('no-cta'),
                    icon: 'üéØ',
                    status: '‚ö†Ô∏è',
                    type: 'negative',
                    description: t('no-cta-desc')
                });
                recommendations.push({
                    icon: 'üëâ',
                    text: t('add-cta')
                });
            }
            
            // Signal 7: Avoids Spam Triggers (negative signals)
            const spamTriggers = text.toLowerCase().match(/buy now|click here|limited time|act now|guarantee|100%|free money|dm me/g);
            if (!spamTriggers) {
                score += 12;
                signals.push({
                    name: t('not-spammy'),
                    icon: '‚ú®',
                    status: '‚úÖ',
                    type: 'positive',
                    description: t('not-spammy-desc')
                });
            } else {
                score -= 15;
                signals.push({
                    name: t('spam-triggers'),
                    icon: '‚ö†Ô∏è',
                    status: '‚ùå',
                    type: 'negative',
                    description: t('spam-desc')
                });
                recommendations.push({
                    icon: 'üö´',
                    text: t('remove-spam')
                });
            }
            
            // Signal 8: Emotional Trigger (engagement driver)
            const hasEmotion = text.match(/[!]{1,3}/) || 
                text.toLowerCase().match(/love|hate|amazing|terrible|shocking|incredible|wild|insane|genius|stupid|brilliant|y√™u|gh√©t|tuy·ªát v·ªùi|kh·ªßng khi·∫øp/);
            if (hasEmotion) {
                score += 10;
                signals.push({
                    name: t('emotional-hook'),
                    icon: 'üî•',
                    status: '‚úÖ',
                    type: 'positive',
                    description: t('emotional-desc')
                });
            } else {
                signals.push({
                    name: t('neutral-tone'),
                    icon: 'üòê',
                    status: '‚ö†Ô∏è',
                    type: 'negative',
                    description: t('neutral-desc')
                });
                recommendations.push({
                    icon: 'üí•',
                    text: t('add-emotion')
                });
            }
            
            // Signal 9: Mentions/Tags (network effects)
            const hasMentions = text.includes('@');
            if (hasMentions) {
                score += 5;
                signals.push({
                    name: t('tags-others'),
                    icon: 'üë•',
                    status: '‚úÖ',
                    type: 'positive',
                    description: t('tags-desc')
                });
            }
            
            // Signal 10: Thread Potential (continuation engagement)
            const hasThreadHint = text.toLowerCase().match(/thread|1\/|here's|here are|\d+\s+(things|ways|reasons|tips|ƒëi·ªÅu|c√°ch|l√Ω do|m·∫πo)/);
            if (hasThreadHint) {
                score += 8;
                signals.push({
                    name: t('thread-potential'),
                    icon: 'üßµ',
                    status: '‚úÖ',
                    type: 'positive',
                    description: t('thread-desc')
                });
            }
            
            // Calculate verdict
            let verdict = '';
            if (score >= 80) {
                verdict = t('viral-potential');
            } else if (score >= 60) {
                verdict = t('strong-post');
            } else if (score >= 40) {
                verdict = t('decent');
            } else {
                verdict = t('needs-work');
            }
            
            // General recommendations
            if (score < 70) {
                recommendations.push({
                    icon: 'üéì',
                    text: t('remember')
                });
            }
            
            if (!hasQuestion && !hasCTA) {
                recommendations.push({
                    icon: '‚ö°',
                    text: t('quick-win')
                });
            }
            
            return {
                score: Math.min(100, Math.max(0, score)),
                verdict,
                signals,
                recommendations
            };
        }
        
        function animateScore(targetScore) {
            const scoreElement = document.getElementById('scoreValue');
            let current = 0;
            const duration = 1500;
            const steps = 60;
            const increment = targetScore / steps;
            const stepDuration = duration / steps;
            
            const timer = setInterval(() => {
                current += increment;
                if (current >= targetScore) {
                    current = targetScore;
                    clearInterval(timer);
                }
                scoreElement.textContent = Math.round(current);
                
                // Color based on score
                if (current >= 80) {
                    scoreElement.style.color = '#22c55e';
                } else if (current >= 60) {
                    scoreElement.style.color = '#3b82f6';
                } else if (current >= 40) {
                    scoreElement.style.color = '#fbbf24';
                } else {
                    scoreElement.style.color = '#ef4444';
                }
            }, stepDuration);
        }
        
        function displayVerdict(score, verdict) {
            const verdictElement = document.getElementById('verdict');
            verdictElement.textContent = verdict;
            
            // Set verdict class
            verdictElement.className = 'verdict';
            if (score >= 80) {
                verdictElement.classList.add('viral');
            } else if (score >= 60) {
                verdictElement.classList.add('good');
            } else if (score >= 40) {
                verdictElement.classList.add('meh');
            } else {
                verdictElement.classList.add('bad');
            }
        }
        
        function displaySignals(signals) {
            const grid = document.getElementById('signalsGrid');
            grid.innerHTML = signals.map(signal => `
                <div class="signal-card ${signal.type}">
                    <div class="signal-header">
                        <span class="signal-icon">${signal.icon}</span>
                        <span class="signal-name">${signal.name}</span>
                        <span class="signal-status">${signal.status}</span>
                    </div>
                    <div class="signal-description">${signal.description}</div>
                </div>
            `).join('');
        }
        
        function displayRecommendations(recommendations) {
            const recsContainer = document.getElementById('recommendations');
            
            if (recommendations.length === 0) {
                recsContainer.innerHTML = `
                    <h3>${t('excellent')}</h3>
                    <div class="recommendation-item">
                        <span class="recommendation-icon">‚ú®</span>
                        <span class="recommendation-text">${t('excellent-text')}</span>
                    </div>
                `;
            } else {
                recsContainer.innerHTML = `
                    <h3>${t('how-to-improve')}</h3>
                    ${recommendations.map(rec => `
                        <div class="recommendation-item">
                            <span class="recommendation-icon">${rec.icon}</span>
                            <span class="recommendation-text">${rec.text}</span>
                        </div>
                    `).join('')}
                `;
            }
        }
    </script>
</body>
</html>